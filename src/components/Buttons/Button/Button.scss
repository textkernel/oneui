@use "sass:map";
$contexts: (primary, secondary, critical);
$variants: (filled, outlined, ghost);

$contextMap: (
    'secondary': 'neutral',
    'primary': 'primary',
    'critical': 'critical'
);

@keyframes buttonLoading {
    0% {
        background-position: 100% 0;
    }
    100% {
        background-position: -100% 0;
    }
}
.Button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--space-75);
    border: none;
    height: var(--space-400);
    box-sizing: border-box;
    cursor: pointer;
    font: {
        size: var(--font-size-small);
        weight: var(--font-weight-bold);
        family: var(--font-family-primary);
    }
    text-decoration: none;
    line-height: var(--line-height-small);
    margin: 0;
    outline: none;
    padding: var(--space-0) var(--space-150);
    text-align: center;
    transition: all var(--transition-duration);
    white-space: nowrap;
    flex-wrap: nowrap;

    // Default variant (filled) and context (primary)
    background-color: var(--color-primary-50);
    color: var(--color-background);

    &:hover {
        background-color: var(--color-primary-60);
    }
    &:active {
        background-color: var(--color-primary-70);
    }
    &:focus {
        box-shadow: 0px 0px 0px 2px var(--color-info-20);
    }
    
    &[disabled] {
        cursor: not-allowed;
        background-color: var(--color-neutral-30);
        color: var(--color-background);
    }

    &--isBlock {
        width: 100%;
    }

    &--size {
        &_small {
            border-radius: var(--space-50);
            height: var(--space-300);
            padding: var(--space-0) var(--space-100);
        }
        &_large {
            border-radius: var(--space-100);
            height: var(--space-500);
            padding: var(--space-0) var(--space-200);
        }
    }
}

@each $context in $contexts {
    @each $variant in $variants {
        $mappedContext: map.get($contextMap, $context);
        .Button--context_#{$context}.Button--variant_#{$variant} {
            @if $variant == filled {
                @if $mappedContext == neutral {
                    background-color: var(--color-neutral-10);
                    color: var(--color-neutral-100);

                    &:hover {
                        background-color: var(--color-neutral-20);
                    }
                    &:active {
                        background-color: var(--color-neutral-30);
                    }
                    &[disabled]{
                        background-color: var(--color-neutral-10);
                        color: var(--color-neutral-50);
                    }
                } @else {
                    background-color: var(--color-#{$mappedContext}-50);
                    color: var(--color-background);

                    &:hover {
                        background-color: var(--color-#{$mappedContext}-60);
                    }
                    &:active {
                        background-color: var(--color-#{$mappedContext}-70);
                    }
                    &[disabled] {
                        background-color: var(--color-#{$mappedContext}-20);
                    }
                }
            } @else if $variant == outlined {
                color: var(--color-#{$mappedContext}-60);
                background-color: transparent;
                border-width: var(--line-normal);
                border-style: solid;
                border-color: var(--color-#{$mappedContext}-50);

                &:hover {
                    background-color: var(--color-#{$mappedContext}-10);
                }
                &:active {
                    background-color: var(--color-#{$mappedContext}-20);
                }
                &[disabled]{
                    color: var(--color-#{$mappedContext}-30);
                    &:hover,
                    &:active {
                        background-color: var(--transparent);
                    }
                    border-color: var(--color-#{$mappedContext}-30);
                }
            } @else if $variant == ghost {
                color: var(--color-#{$mappedContext}-60);
                background-color: var(--transparent);
                &:hover {
                    background-color: var(--color-#{$mappedContext}-10);
                }
                &:active {
                    background-color: var(--color-#{$mappedContext}-20);
                }
                &[disabled] {
                    color: var(--color-#{$mappedContext}-30);
                    &:hover,
                    &:active {
                        background-color: var(--transparent);
                    }
                }
            }
        }
    }
}